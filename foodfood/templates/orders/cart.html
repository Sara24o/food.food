{% extends 'base.html' %}
{% block title %}Cart{% endblock %}
{% block content %}
<h1>Cart</h1>
{% if restaurant %}
<p>Restaurant: {{ restaurant.name }}</p>
{% endif %}
<table class="table">
  <thead>
    <tr><th>Item</th><th>Qty</th><th>Total</th><th></th></tr>
  </thead>
  <tbody>
    {% for row in cart_items %}
    <tr>
      <td>{{ row.menu_item.name }}</td>
      <td>{{ row.quantity }}</td>
      <td>{{ row.line_total }} €</td>
      <td>
        <a href="/orders/remove/{{ row.menu_item.id }}/" class="btn btn-sm btn-outline-danger">-</a>
        <a href="/orders/add/{{ row.menu_item.id }}/" class="btn btn-sm btn-outline-success">+</a>
      </td>
    </tr>
    {% empty %}
    <tr><td colspan="4">Your cart is empty.</td></tr>
    {% endfor %}
  </tbody>
</table>
<div class="d-flex justify-content-end gap-3">
  <span>Subtotal: <strong>{{ subtotal }} €</strong></span>
  <span>Delivery: <strong>{{ delivery_fee }} €</strong></span>
  <span>Total: <strong>{{ total }} €</strong></span>
</div>
<form method="post" action="/orders/checkout/" class="mt-3">
  {% csrf_token %}
  <button class="btn btn-primary" {% if not cart_items %}disabled{% endif %}>Checkout</button>
  <a href="/" class="btn btn-link">Continue Shopping</a>
  <a href="/orders/history/" class="btn btn-outline-secondary">My Orders</a>
</form>
{% endblock %}


