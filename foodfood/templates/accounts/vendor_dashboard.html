{% extends 'base.html' %}
{% block title %}Vendor Dashboard{% endblock %}
{% block content %}
<div class="row">
  <div class="col-12">
    <div class="d-flex justify-content-between align-items-center mb-4">
      <h1>Vendor Dashboard</h1>
      <span class="badge bg-success">Welcome, {{ vendor.restaurant_name }}</span>
    </div>
  </div>
</div>

<div class="row">
  <!-- Restaurants Overview -->
  <div class="col-md-6 mb-4">
    <div class="card">
      <div class="card-header">
        <h5 class="mb-0">My Restaurants</h5>
      </div>
      <div class="card-body">
        {% if restaurants %}
          {% for restaurant in restaurants %}
            <div class="d-flex justify-content-between align-items-center mb-2">
              <div>
                <strong>{{ restaurant.name }}</strong>
                <br>
                <small class="text-muted">{{ restaurant.get_cuisine_type_display }}</small>
              </div>
              <div>
                <span class="badge {% if restaurant.is_open %}bg-success{% else %}bg-secondary{% endif %}">
                  {% if restaurant.is_open %}Open{% else %}Closed{% endif %}
                </span>
                <a href="{% url 'vendor-menu' restaurant.id %}" class="btn btn-sm btn-outline-primary">Manage Menu</a>
              </div>
            </div>
            {% if not forloop.last %}<hr>{% endif %}
          {% endfor %}
        {% else %}
          <p class="text-muted">No restaurants registered yet.</p>
        {% endif %}
      </div>
    </div>
  </div>

  <!-- Recent Orders -->
  <div class="col-md-6 mb-4">
    <div class="card">
      <div class="card-header">
        <h5 class="mb-0">Recent Orders</h5>
      </div>
      <div class="card-body">
        {% if recent_orders %}
          {% for order in recent_orders %}
            <div class="d-flex justify-content-between align-items-center mb-2">
              <div>
                <strong>Order #{{ order.id }}</strong>
                <br>
                <small class="text-muted">{{ order.restaurant.name }} - {{ order.customer.user.username }}</small>
              </div>
              <div>
                <span class="badge 
                  {% if order.status == 'pending' %}bg-warning
                  {% elif order.status == 'accepted' %}bg-info
                  {% elif order.status == 'preparing' %}bg-primary
                  {% elif order.status == 'on_the_way' %}bg-secondary
                  {% elif order.status == 'delivered' %}bg-success
                  {% else %}bg-danger{% endif %}">
                  {{ order.status|title }}
                </span>
              </div>
            </div>
            {% if not forloop.last %}<hr>{% endif %}
          {% endfor %}
          <div class="mt-3">
            <a href="{% url 'vendor-orders' %}" class="btn btn-outline-primary btn-sm">View All Orders</a>
          </div>
        {% else %}
          <p class="text-muted">No recent orders.</p>
        {% endif %}
      </div>
    </div>
  </div>
</div>

<!-- Quick Actions -->
<div class="row">
  <div class="col-12">
    <div class="card">
      <div class="card-header">
        <h5 class="mb-0">Quick Actions</h5>
      </div>
      <div class="card-body">
        <div class="row">
          <div class="col-md-4">
            <a href="{% url 'vendor-orders' %}" class="btn btn-primary w-100 mb-2">
              <i class="fas fa-list"></i> Manage Orders
            </a>
          </div>
          <div class="col-md-4">
            <a href="{% url 'profile' %}" class="btn btn-outline-info w-100 mb-2">
              <i class="fas fa-user"></i> My Profile
            </a>
          </div>
          <div class="col-md-4">
            <a href="/admin/" class="btn btn-outline-secondary w-100 mb-2">
              <i class="fas fa-cog"></i> Admin Panel
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
